2025-08-26 10:08:48.404 [background-preinit] INFO  [] [] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-08-26 10:08:48.752 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoControllerTest - Starting SolicitacaoControllerTest using Java 21.0.8 with PID 9244 (started by ubuntu in /home/ubuntu/itau-seguros-mvp)
2025-08-26 10:08:48.754 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoControllerTest - No active profile set, falling back to 1 default profile: "default"
2025-08-26 10:08:51.247 [main] INFO  [] [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-08-26 10:08:51.247 [main] INFO  [] [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-08-26 10:08:51.249 [main] INFO  [] [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-08-26 10:08:51.269 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoControllerTest - Started SolicitacaoControllerTest in 4.675 seconds (process running for 6.101)
2025-08-26 10:08:51.360 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoController - Buscando solicitações do cliente: 6dea9b67-3c58-4e2b-80cd-05a590022c05
2025-08-26 10:08:51.499 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoController - Cancelando solicitação: 1ab4c78b-5b1a-42a4-b349-a8e97f267f36
2025-08-26 10:08:51.655 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoController - Recebida requisição para criar solicitação
2025-08-26 10:08:51.677 [main] WARN  [] [] o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.itau.seguros.solicitacao.api.dto.SolicitacaoResponseDTO> com.itau.seguros.solicitacao.api.controller.SolicitacaoController.criar(com.itau.seguros.solicitacao.api.dto.SolicitacaoRequestDTO) with 8 errors: [Field error in object 'solicitacaoRequestDTO' on field 'totalMonthlyPremiumAmount': rejected value [null]; codes [NotNull.solicitacaoRequestDTO.totalMonthlyPremiumAmount,NotNull.totalMonthlyPremiumAmount,NotNull.java.math.BigDecimal,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [solicitacaoRequestDTO.totalMonthlyPremiumAmount,totalMonthlyPremiumAmount]; arguments []; default message [totalMonthlyPremiumAmount]]; default message [Valor do prêmio mensal é obrigatório]] [Field error in object 'solicitacaoRequestDTO' on field 'category': rejected value [null]; codes [NotNull.solicitacaoRequestDTO.category,NotNull.category,NotNull.com.itau.seguros.solicitacao.domain.model.CategoriaSeguro,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [solicitacaoRequestDTO.category,category]; arguments []; default message [category]]; default message [Categoria do seguro é obrigatória]] [Field error in object 'solicitacaoRequestDTO' on field 'salesChannel': rejected value [null]; codes [NotBlank.solicitacaoRequestDTO.salesChannel,NotBlank.salesChannel,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [solicitacaoRequestDTO.salesChannel,salesChannel]; arguments []; default message [salesChannel]]; default message [Canal de vendas é obrigatório]] [Field error in object 'solicitacaoRequestDTO' on field 'productId': rejected value [null]; codes [NotBlank.solicitacaoRequestDTO.productId,NotBlank.productId,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [solicitacaoRequestDTO.productId,productId]; arguments []; default message [productId]]; default message [ID do produto é obrigatório]] [Field error in object 'solicitacaoRequestDTO' on field 'coverages': rejected value [null]; codes [NotNull.solicitacaoRequestDTO.coverages,NotNull.coverages,NotNull.java.util.Map,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [solicitacaoRequestDTO.coverages,coverages]; arguments []; default message [coverages]]; default message [Coberturas são obrigatórias]] [Field error in object 'solicitacaoRequestDTO' on field 'assistances': rejected value [null]; codes [NotNull.solicitacaoRequestDTO.assistances,NotNull.assistances,NotNull.java.util.List,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [solicitacaoRequestDTO.assistances,assistances]; arguments []; default message [assistances]]; default message [Lista de assistências é obrigatória]] [Field error in object 'solicitacaoRequestDTO' on field 'paymentMethod': rejected value [null]; codes [NotBlank.solicitacaoRequestDTO.paymentMethod,NotBlank.paymentMethod,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [solicitacaoRequestDTO.paymentMethod,paymentMethod]; arguments []; default message [paymentMethod]]; default message [Forma de pagamento é obrigatória]] [Field error in object 'solicitacaoRequestDTO' on field 'insuredAmount': rejected value [null]; codes [NotNull.solicitacaoRequestDTO.insuredAmount,NotNull.insuredAmount,NotNull.java.math.BigDecimal,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [solicitacaoRequestDTO.insuredAmount,insuredAmount]; arguments []; default message [insuredAmount]]; default message [Valor do capital segurado é obrigatório]] ]
2025-08-26 10:08:51.686 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoController - Buscando solicitação por ID: 0c41f5c9-8438-400e-880c-84e06d2da1e9
2025-08-26 10:08:51.695 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoController - Cancelando solicitação: f2210065-dbac-4090-b13e-dd5cb8dfdd21
2025-08-26 10:08:51.695 [main] WARN  [] [] c.i.s.s.a.c.SolicitacaoController - Não é possível cancelar a solicitação f2210065-dbac-4090-b13e-dd5cb8dfdd21: Solicitação não pode ser cancelada no estado atual: APROVADA
2025-08-26 10:08:51.720 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoController - Buscando solicitação por ID: f2319fb5-42df-4c70-a7e1-d872db1a1934
2025-08-26 10:08:51.720 [main] WARN  [] [] c.i.s.s.a.c.SolicitacaoController - Solicitação não encontrada: f2319fb5-42df-4c70-a7e1-d872db1a1934
2025-08-26 10:08:52.233 [main] INFO  [] [] c.i.s.s.a.service.SolicitacaoService - Cancelando solicitação: 9adc802a-1540-41dc-b7e3-234c900fc555
2025-08-26 10:08:52.234 [main] INFO  [] [] c.i.s.s.a.service.SolicitacaoService - Solicitação 9adc802a-1540-41dc-b7e3-234c900fc555 cancelada com sucesso
2025-08-26 10:08:52.266 [main] INFO  [b645f342-b285-4852-8806-dd5b0ec78176] [3c862021-8fd4-4fcd-bd5a-18c3c432c529] c.i.s.s.a.service.SolicitacaoService - Criando nova solicitação para cliente 3c862021-8fd4-4fcd-bd5a-18c3c432c529
2025-08-26 10:08:52.267 [main] INFO  [b645f342-b285-4852-8806-dd5b0ec78176] [3c862021-8fd4-4fcd-bd5a-18c3c432c529] c.i.s.s.a.service.SolicitacaoService - Solicitação f021f8b3-e26c-4eae-aef8-ae6666b0e920 criada com sucesso
2025-08-26 10:08:52.274 [main] INFO  [] [] c.i.s.s.a.service.SolicitacaoService - Buscando solicitação por ID: 123141df-3ba9-43fa-a21f-fd7d87674f72
2025-08-26 10:08:52.279 [main] INFO  [] [] c.i.s.s.a.service.SolicitacaoService - Cancelando solicitação: 6cfc0c91-6545-4fb9-bc98-23b6a8a44f2c
2025-08-26 10:08:52.285 [main] INFO  [fd2eaa8d-c062-4764-baa4-1d53d0e7c0ae] [] c.i.s.s.a.service.SolicitacaoService - Processando validação da solicitação 4b7baef7-da20-4be7-878a-ce831962a3d1
2025-08-26 10:08:52.285 [main] INFO  [fd2eaa8d-c062-4764-baa4-1d53d0e7c0ae] [] c.i.s.s.a.service.SolicitacaoService - Cliente 44e5439a-697d-4627-a266-4952be60aefd classificado como REGULAR
2025-08-26 10:08:52.286 [main] INFO  [fd2eaa8d-c062-4764-baa4-1d53d0e7c0ae] [] c.i.s.s.a.service.SolicitacaoService - Solicitação 4b7baef7-da20-4be7-878a-ce831962a3d1 rejeitada: Capital segurado excede limite
2025-08-26 10:08:52.291 [main] INFO  [3f28ab31-ffa3-48a7-82e6-dbba78fd6b97] [] c.i.s.s.a.service.SolicitacaoService - Processando validação da solicitação 178f4a00-57b7-492f-8315-edf68801d4dd
2025-08-26 10:08:52.292 [main] INFO  [3f28ab31-ffa3-48a7-82e6-dbba78fd6b97] [] c.i.s.s.a.service.SolicitacaoService - Cliente 4e6ee20b-24d7-4072-b6a9-d1768898bdfe classificado como REGULAR
2025-08-26 10:08:52.293 [main] INFO  [3f28ab31-ffa3-48a7-82e6-dbba78fd6b97] [] c.i.s.s.a.service.SolicitacaoService - Solicitação 178f4a00-57b7-492f-8315-edf68801d4dd validada com sucesso
2025-08-26 10:09:41.995 [background-preinit] INFO  [] [] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-08-26 10:09:42.098 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoControllerTest - Starting SolicitacaoControllerTest using Java 21.0.8 with PID 9390 (started by ubuntu in /home/ubuntu/itau-seguros-mvp)
2025-08-26 10:09:42.099 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoControllerTest - No active profile set, falling back to 1 default profile: "default"
2025-08-26 10:09:44.575 [main] INFO  [] [] o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-08-26 10:09:44.576 [main] INFO  [] [] o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-08-26 10:09:44.578 [main] INFO  [] [] o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-08-26 10:09:44.605 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoControllerTest - Started SolicitacaoControllerTest in 3.085 seconds (process running for 4.406)
2025-08-26 10:09:44.712 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoController - Buscando solicitações do cliente: 9d4b1402-02e9-47d5-9745-b2cbd52baebe
2025-08-26 10:09:44.893 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoController - Cancelando solicitação: 40553404-0641-4cd4-bfdf-ae52d85b0938
2025-08-26 10:09:45.108 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoController - Recebida requisição para criar solicitação
2025-08-26 10:09:45.157 [main] WARN  [] [] o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.itau.seguros.solicitacao.api.dto.SolicitacaoResponseDTO> com.itau.seguros.solicitacao.api.controller.SolicitacaoController.criar(com.itau.seguros.solicitacao.api.dto.SolicitacaoRequestDTO) with 8 errors: [Field error in object 'solicitacaoRequestDTO' on field 'salesChannel': rejected value [null]; codes [NotBlank.solicitacaoRequestDTO.salesChannel,NotBlank.salesChannel,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [solicitacaoRequestDTO.salesChannel,salesChannel]; arguments []; default message [salesChannel]]; default message [Canal de vendas é obrigatório]] [Field error in object 'solicitacaoRequestDTO' on field 'assistances': rejected value [null]; codes [NotNull.solicitacaoRequestDTO.assistances,NotNull.assistances,NotNull.java.util.List,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [solicitacaoRequestDTO.assistances,assistances]; arguments []; default message [assistances]]; default message [Lista de assistências é obrigatória]] [Field error in object 'solicitacaoRequestDTO' on field 'totalMonthlyPremiumAmount': rejected value [null]; codes [NotNull.solicitacaoRequestDTO.totalMonthlyPremiumAmount,NotNull.totalMonthlyPremiumAmount,NotNull.java.math.BigDecimal,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [solicitacaoRequestDTO.totalMonthlyPremiumAmount,totalMonthlyPremiumAmount]; arguments []; default message [totalMonthlyPremiumAmount]]; default message [Valor do prêmio mensal é obrigatório]] [Field error in object 'solicitacaoRequestDTO' on field 'productId': rejected value [null]; codes [NotBlank.solicitacaoRequestDTO.productId,NotBlank.productId,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [solicitacaoRequestDTO.productId,productId]; arguments []; default message [productId]]; default message [ID do produto é obrigatório]] [Field error in object 'solicitacaoRequestDTO' on field 'category': rejected value [null]; codes [NotNull.solicitacaoRequestDTO.category,NotNull.category,NotNull.com.itau.seguros.solicitacao.domain.model.CategoriaSeguro,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [solicitacaoRequestDTO.category,category]; arguments []; default message [category]]; default message [Categoria do seguro é obrigatória]] [Field error in object 'solicitacaoRequestDTO' on field 'paymentMethod': rejected value [null]; codes [NotBlank.solicitacaoRequestDTO.paymentMethod,NotBlank.paymentMethod,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [solicitacaoRequestDTO.paymentMethod,paymentMethod]; arguments []; default message [paymentMethod]]; default message [Forma de pagamento é obrigatória]] [Field error in object 'solicitacaoRequestDTO' on field 'insuredAmount': rejected value [null]; codes [NotNull.solicitacaoRequestDTO.insuredAmount,NotNull.insuredAmount,NotNull.java.math.BigDecimal,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [solicitacaoRequestDTO.insuredAmount,insuredAmount]; arguments []; default message [insuredAmount]]; default message [Valor do capital segurado é obrigatório]] [Field error in object 'solicitacaoRequestDTO' on field 'coverages': rejected value [null]; codes [NotNull.solicitacaoRequestDTO.coverages,NotNull.coverages,NotNull.java.util.Map,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [solicitacaoRequestDTO.coverages,coverages]; arguments []; default message [coverages]]; default message [Coberturas são obrigatórias]] ]
2025-08-26 10:09:45.170 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoController - Buscando solicitação por ID: f8e9d37e-89a7-4cbe-9a6b-dbb50f421c98
2025-08-26 10:09:45.190 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoController - Cancelando solicitação: 4b309956-1f9d-40c4-83a6-1cd3aab1f674
2025-08-26 10:09:45.191 [main] WARN  [] [] c.i.s.s.a.c.SolicitacaoController - Não é possível cancelar a solicitação 4b309956-1f9d-40c4-83a6-1cd3aab1f674: Solicitação não pode ser cancelada no estado atual: APROVADA
2025-08-26 10:09:45.203 [main] INFO  [] [] c.i.s.s.a.c.SolicitacaoController - Buscando solicitação por ID: 4e1c0348-7322-4089-97f7-a0b681a6d3fb
2025-08-26 10:09:45.203 [main] WARN  [] [] c.i.s.s.a.c.SolicitacaoController - Solicitação não encontrada: 4e1c0348-7322-4089-97f7-a0b681a6d3fb
2025-08-26 10:09:45.721 [main] INFO  [] [] c.i.s.s.a.service.SolicitacaoService - Cancelando solicitação: bc42e155-ca0d-4955-8b2f-43689fb12764
2025-08-26 10:09:45.723 [main] INFO  [] [] c.i.s.s.a.service.SolicitacaoService - Solicitação bc42e155-ca0d-4955-8b2f-43689fb12764 cancelada com sucesso
2025-08-26 10:09:45.733 [main] INFO  [28be770b-6dea-4ab4-916c-0fe3cef6e786] [6d187729-b502-4f92-bf90-ed7e7d0779d9] c.i.s.s.a.service.SolicitacaoService - Criando nova solicitação para cliente 6d187729-b502-4f92-bf90-ed7e7d0779d9
2025-08-26 10:09:45.733 [main] INFO  [28be770b-6dea-4ab4-916c-0fe3cef6e786] [6d187729-b502-4f92-bf90-ed7e7d0779d9] c.i.s.s.a.service.SolicitacaoService - Solicitação a269d830-20ef-4dd7-80ea-f215086f2abc criada com sucesso
2025-08-26 10:09:45.741 [main] INFO  [] [] c.i.s.s.a.service.SolicitacaoService - Buscando solicitação por ID: b30ca5d1-9b38-4645-a79d-fee2c49a561b
2025-08-26 10:09:45.748 [main] INFO  [] [] c.i.s.s.a.service.SolicitacaoService - Cancelando solicitação: 4f12edac-e3f0-432a-8a67-0e0acef237db
2025-08-26 10:09:45.755 [main] INFO  [b986f09e-4791-4232-8dea-0eb43df14f02] [] c.i.s.s.a.service.SolicitacaoService - Processando validação da solicitação 573c8b5a-fe35-4119-b1d7-b4faeb431b7a
2025-08-26 10:09:45.756 [main] INFO  [b986f09e-4791-4232-8dea-0eb43df14f02] [] c.i.s.s.a.service.SolicitacaoService - Cliente 8547d897-0219-422c-8954-573061f7caab classificado como REGULAR
2025-08-26 10:09:45.757 [main] INFO  [b986f09e-4791-4232-8dea-0eb43df14f02] [] c.i.s.s.a.service.SolicitacaoService - Solicitação 573c8b5a-fe35-4119-b1d7-b4faeb431b7a rejeitada: Capital segurado excede limite
2025-08-26 10:09:45.763 [main] INFO  [0832e7f2-72df-4072-b4c1-92e0af9f2641] [] c.i.s.s.a.service.SolicitacaoService - Processando validação da solicitação 6b34c39e-f604-4051-b888-e694411d4fb8
2025-08-26 10:09:45.763 [main] INFO  [0832e7f2-72df-4072-b4c1-92e0af9f2641] [] c.i.s.s.a.service.SolicitacaoService - Cliente c5b98b2f-a9f5-4be3-960f-cb704c2543a9 classificado como REGULAR
2025-08-26 10:09:45.764 [main] INFO  [0832e7f2-72df-4072-b4c1-92e0af9f2641] [] c.i.s.s.a.service.SolicitacaoService - Solicitação 6b34c39e-f604-4051-b888-e694411d4fb8 validada com sucesso
